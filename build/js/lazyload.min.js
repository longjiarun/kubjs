!function(t,i){"function"==typeof define?define(function(){return i(t,t.jQuery||t.Zepto)}):t.LazyLoad=i(t,t.jQuery||t.Zepto)}(this,function(t,i){"use strict";var e=function(t,e){this.$element=i(t),this.options=i.extend({},this.defaults,e||{}),this.$window=i(window),this.$container=void 0===this.options.container||this.options.container===window?(this.containerIsWindow=!0,this.$window):i(this.options.container),this._init()};return function(){this.constructor=e,this.defaults={container:window,threshold:50,waitTime:5e3,delay:150,attributeName:"original",eventName:"scroll resize"},this.updateElement=function(t){var i=this;return i.$element=t,i.loadElementsInViewport(),i},this.getUnloadedElements=function(){var t=this;return t.$element.filter(function(){return!this.loaded})},this.loadAll=function(){{var t,e=this;e.options}t=e.getUnloadedElements(),t.each(function(){var t=i(this);e.load(t,t.attr("data-"+e.options.attributeName))})},this.loadElementsInViewport=function(){var t,e=this,o=e.options;return t=e.getUnloadedElements(),0==t.length&&(e.completed=!0),t.each(function(){var t=i(this),n=!0;n=e.isVisible(t,o),n&&e.load(t,t.attr("data-"+e.options.attributeName))}),e},this.isVisible=function(t,i){var e=this;return e.abovethetop(t,i)?!1:e.belowthefold(t,i)?!1:e.leftofbegin(t,i)?!1:e.rightoffold(t,i)?!1:!0},this._loadAllIfTimeout=function(){var t=this,i=t.options;return"number"==typeof i.waitTime&&!(i.waitTime!==+i.waitTime)&&i.waitTime>0&&(t._waitTimer=setTimeout(function(){t.loadAll()},i.waitTime)),t},this._init=function(){var t=this,i=t.options;this._handle=function(){t.completed||(t._timer&&clearTimeout(t._timer),t._waitTimer&&clearTimeout(t._waitTimer),t._timer=setTimeout(function(){t.loadElementsInViewport(),t._loadAllIfTimeout()},i.delay))},t.loadElementsInViewport(),t._loadAllIfTimeout(),t.$container.on(i.eventName,t._handle),!t.containerIsWindow&&t.$window.on("resize",t._handle)},this.load=function(t,i){return i?(t.is("img")?t.attr("src",i):t.css("background-image","url('"+i+"')"),t[0].loaded=!0,this):void 0},this.destory=function(){var t=this,i=t.options;return t.$container.off(i.eventName,t._handle),!t.containerIsWindow&&t.$window.off("resize",t._handle),t._timer&&clearTimeout(t._timer),t._waitTimer&&clearTimeout(t._waitTimer),t},this.isInViewport=function(t){return!(this.belowthefold(t[0],this.options)||this.abovethetop(t[0],this.options)||this.rightoffold(t[0],this.options)||this.leftofbegin(t[0],this.options))},this.belowthefold=function(t,e){var o,n=i(window);return o=void 0===e.container||e.container===window?(window.innerHeight?window.innerHeight:n.height())+n.scrollTop():i(e.container).offset().top+i(e.container).height(),o<=i(t).offset().top-e.threshold},this.abovethetop=function(t,e){var o,n=i(window);return o=void 0===e.container||e.container===window?n.scrollTop():i(e.container).offset().top,o>=i(t).offset().top+e.threshold+i(t).height()},this.rightoffold=function(t,e){var o,n=i(window);return o=void 0===e.container||e.container===window?n.width()+n.scrollLeft():i(e.container).offset().left+i(e.container).width(),o<=i(t).offset().left-e.threshold},this.leftofbegin=function(t,e){var o,n=i(window);return o=void 0===e.container||e.container===window?n.scrollLeft():i(e.container).offset().left,o>=i(t).offset().left+e.threshold+i(t).width()}}.call(e.prototype),e});