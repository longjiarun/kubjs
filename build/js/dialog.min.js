!function(t,o){"function"==typeof define?define(function(){return o(t,t.jQuery||t.Zepto,t._)}):t.Dialog=o(t,t.jQuery||t.Zepto,t._)}(this,function(t,o,i){var s=function(t){this.options=o.extend({},s.defaults,t||{}),this.options.buttons&&this.options.buttons.length>5&&(this.options.buttons.length=5),this._init()},e=o("body"),n=e.parent();s.defaults={modal:!0,title:"",showHeader:!0,message:"",closable:!0,scrollable:!1},s.i18n={zh:{ok:"确定",cancel:"取消"},en:{ok:"Ok",cancel:"Cancel"}};var a="bofh",l="J_dialog",d="J_dialogClose",r="J_dialogButton",h='<div class="dialog-modal <%= data.className%> <%if( data.modal ){%> modal <%}%>"> <div class="dialog" id="J_dialog"> <%if(data.showHeader){%> <div class="dialog-header clearfix"> <strong><%= data.title%></strong> <%if(data.closable){%><button class="dialog-button dialog-close" id="J_dialogClose">×</button><%}%> </div> <%}%> <div class="dialog-body"> <%= data.message%> </div> <%if(data.buttons && data.buttons.length){%> <div class="dialog-footer column<%= data.buttons.length%>"> <% for (var i=0,j=data.buttons.length;i<j;i++){%><button class="dialog-button J_dialogButton" data-index="<%= i%>"><%= data.buttons[i].text%></button><%}%> </div> <%}%> </div> </div>';return function(){this.constructor=s,this.inherit=function(t,o){var i=function(){};i.prototype=o.prototype,t.prototype=new i,t.prototype.constructor=t,t.uber=o.prototype},this.render=function(t){if(this.completed)return this;var s=i.template(h),n=s({data:t});return this.$element=o(n).appendTo(e),this.completed=!0,this},this._init=function(){var t=this,i=t.options;t.render(i),this.$dialog=this.$element.find("#"+l),t.show(),t.setPosition(),t.$element.find("#"+d).on("click",function(){t.close()}),t.$element.on("click","."+r,function(s){var e=parseInt(o(this).attr("data-index"));i.buttons[e]&&i.buttons[e].handler&&i.buttons[e].handler.call(this,s,t)})},this.setPosition=function(){return this.$dialog.css({"margin-top":-(this.$dialog.height()/2||100),top:"50%"}),this};var t=0;this.disableScrollbar=function(){return!this.options.scrollable&&e.addClass(a)&&n.addClass(a)&&t++,this},this.enableScrollbar=function(){return!this.options.scrollable&&1>t&&e.removeClass(a)&&n.removeClass(a)&&(t=0),this},this.show=function(){return this.disableScrollbar(),this.$element.show(),this.$dialog.addClass("dialog-zoomin"),this},this.hide=function(){return!this.options.scrollable&&t--,this.enableScrollbar(),this.$element.hide(),this},this.close=function(){var t=this;return this.options.closeHandler&&this.options.closeHandler.call(this)===!1?this:(this.hide(),t.$element.remove(),this)}}.call(s.prototype),s});